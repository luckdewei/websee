{"version":3,"file":"monitor.esm.js","sources":["../src/config.js","../src/utils.js","../src/cache.js","../src/report.js","../src/preformance/fetch.js","../src/preformance/observerEntries.js","../src/preformance/observerLCP.js","../src/preformance/observerFCP.js","../src/preformance/observerLoad.js","../src/preformance/observerPaint.js","../src/preformance/xhr.js","../src/preformance/index.js","../src/error/index.js","../src/behavior/onClick.js","../src/behavior/pageChange.js","../src/behavior/pv.js","../src/behavior/index.js","../src/webSeeSDK.js"],"sourcesContent":["// config 默认值\nconst config = {\n  url: 'http://127.0.0.1:9800/reportData',\n  projectName: 'eyesdk',\n  appId: '123456',\n  userId: '123456',\n  isImageUpload: false,\n  batchSize: 5,\n};\n// 暴露一个方法，用来修改默认值\nexport function setConfig(options) {\n  for (const key in config) {\n      if (options[key]) {\n          config[key] = options[key];\n      }\n  }\n}\nexport default config;","export function deepCopy(object, map =new WeakMap()) {\n  // 如果是基本数据类型 直接返回\n  if (!object || typeof object !== 'object') return object\n  // 考虑循环引用\n  if (map.get(object)) return map.get(object)\n\n  let newObject = Array.isArray(object) ? [] : {}\n\n  map.set(object, newObject)\n\n  for (let key in object) {\n    if (object.hasOwnProperty(key)) {\n      newObject[key] =\n        typeof object[key] === 'object' ? deepCopy(object[key]) : object[key]\n    }\n  }\n\n  return newObject\n}\n\nexport function generateUniqueId() {\n  return 'id-' + Date.now() + '-' + Math.random().toString(36).substring(2, 9)\n}","import { deepCopy } from './utils.js';\n\n\nconst cache = [];\nexport function getCache() {\n  return deepCopy(cache);\n}\nexport function addCache(data) {\n  cache.push(data);\n}\nexport function clearCache() {\n  cache.length = 0;\n}","import config from './config';\nimport { generateUniqueId } from './utils';\nimport { addCache, getCache, clearCache } from './cache';\nexport const originalProto = XMLHttpRequest.prototype;\nexport const originalOpen = XMLHttpRequest.prototype.open;\nexport const originalSend = XMLHttpRequest.prototype.send;\nexport function isSupportSendBeacon() {\n  return 'sendBeacon' in navigator;\n}\nexport function report(data) {\n  if (!config.url) {\n    console.error('请设置上传 url 地址');\n  }\n  const reportData = JSON.stringify({\n    id: generateUniqueId(),\n    data,\n  });\n  // 上报数据，使用图片的方式\n  if (config.isImageUpload) {\n    imgRequest(reportData);\n  } else {\n    // 优先使用 sendBeacon\n    if (window.navigator.sendBeacon) {\n      return beaconRequest(reportData);\n    } else {\n      xhrRequest(reportData);\n    }\n  }\n}\n// 批量上报数据\nexport function lazyReportBatch(data) {\n  addCache(data);\n  const dataCache = getCache();\n  console.log('dataCache', dataCache);\n  if (dataCache.length && dataCache.length > config.batchSize) {\n    report(dataCache);\n    clearCache();\n  }\n  //\n}\n// 图片发送数据\nexport function imgRequest(data) {\n  const img = new Image();\n  // http://127.0.0.1:8080/api?data=encodeURIComponent(data)\n  img.src = `${config.url}?data=${encodeURIComponent(JSON.stringify(data))}`;\n}\n// 普通ajax发送请求数据\nexport function xhrRequest(data) {\n  if (window.requestIdleCallback) {\n    window.requestIdleCallback(\n      () => {\n        const xhr = new XMLHttpRequest();\n        originalOpen.call(xhr, 'post', config.url);\n        originalSend.call(xhr, JSON.stringify(data));\n      },\n      { timeout: 3000 }\n    );\n  } else {\n    setTimeout(() => {\n      const xhr = new XMLHttpRequest();\n      originalOpen.call(xhr, 'post', url);\n      originalSend.call(xhr, JSON.stringify(data));\n    });\n  }\n}\n\n// const sendBeacon = isSupportSendBeacon() ? navigator.sendBeacon : xhrRequest\nexport function beaconRequest(data) {\n  if (window.requestIdleCallback) {\n    window.requestIdleCallback(\n      () => {\n        window.navigator.sendBeacon(config.url, data);\n      },\n      { timeout: 3000 }\n    );\n  } else {\n    setTimeout(() => {\n      window.navigator.sendBeacon(config.url, data);\n    });\n  }\n}","import { lazyReportBatch } from '../report';\nconst originalFetch = window.fetch;\nfunction overwriteFetch() {\n    window.fetch = function  newFetch(url, config) {\n        const startTime = Date.now();\n        const reportData = {\n            type: 'performance',\n            subType: 'fetch',\n            url,\n            startTime,\n            method: config.method,\n        }\n        return originalFetch(url, config).then((res) => {\n            const endTime = Date.now();\n            reportData.endTime = endTime;\n            reportData.duration = endTime - startTime;\n            const data = res.clone();\n            reportData.status = data.status;\n            reportData.success = data.ok;\n            // todo 上报数据\n            lazyReportBatch(reportData);\n            return res;\n        }).catch((err) => {\n            const endTime = Date.now();\n            reportData.endTime = endTime;\n            reportData.duration = endTime - startTime;\n            reportData.status = 0;\n            reportData.success = false;\n            // todo 上报数据\n            lazyReportBatch(reportData);\n        });\n    }\n}\nexport default function fetch() {\n    overwriteFetch();\n}","import { lazyReportBatch } from '../report';\n\n// 前端静态资源收集\nexport default function observerEntries() {\n  if (document.readyState === 'complete') {\n    observerEvent();\n  } else {\n    const onLoad = () => {\n      observerEvent();\n      window.removeEventListener('load', onLoad, true);\n    };\n    window.addEventListener('load', onLoad, true);\n  }\n}\n\nexport function observerEvent() {\n  const entryHandler = (list) => {\n    const data = list.getEntries();\n    for (let entry of data) {\n      if (observer) {\n        observer.disconnect();\n      }\n      console.log('entry', entry);\n      const reportData = {\n        name: entry.name, // 资源的名字\n        type: 'performance', // 类型\n        subType: entry.entryType, //类型\n        sourceType: entry.initiatorType, // 资源类型\n        duration: entry.duration, // 加载时间\n        dns: entry.domainLookupEnd - entry.domainLookupStart, // dns解析时间\n        tcp: entry.connectEnd - entry.connectStart, // tcp连接时间\n        redirect: entry.redirectEnd - entry.redirectStart, // 重定向时间\n        ttfb: entry.responseStart, // 首字节时间\n        protocol: entry.nextHopProtocol, // 请求协议\n        responseBodySize: entry.encodedBodySize, // 响应内容大小\n        responseHeaderSize: entry.transferSize - entry.encodedBodySize, // 响应头部大小\n        transferSize: entry.transferSize, //真实的请求内容大小\n        resourceSize: entry.decodedBodySize, // 资源解压后的大小\n        startTime: performance.now(),\n      };\n\n      lazyReportBatch(reportData);\n    }\n  }\n\n  let observer = new PerformanceObserver(entryHandler)\n  observer.observe({ type: ['resource'], buffered: true })\n}","import { lazyReportBatch } from '../report';\n\nexport default function observerLCP() {\n  const entryHandler = (list) => {\n    if (observer) {\n      observer.disconnect()\n    }\n    for (const entry of list.getEntries()) {\n      const json = entry.toJSON()\n      console.log(json);\n      const reportData = {\n        ...json,\n        type: 'performance',\n        subType: entry.name,\n        pageUrl: window.location.href\n      }\n      // 发送数据 todo\n      lazyReportBatch(reportData);\n    }\n  \n  }\n  \n  const observer = new PerformanceObserver(entryHandler)\n  observer.observe({ type: 'largest-contentful-paint', buffered: true })\n}","import { lazyReportBatch } from '../report';\n\nexport default function observerFCP() {\n  const entryHandler = (list) => {\n    for(const entry of list.getEntries()) {\n      if (entry.name === 'first-contentful-paint') {\n        observer.disconnect()\n        const json = entry.toJSON()\n        console.log(json);\n        const reportData = {\n          ...json,\n          type: 'performance',\n          subType: entry.name,\n          pageUrl: window.location.href\n        }\n        // 发送数据 todo\n        lazyReportBatch(reportData);\n      }\n    }\n  }\n  \n  const observer = new PerformanceObserver(entryHandler)\n  observer.observe({type: 'paint', buffered: true})\n}\n","import { lazyReportBatch } from '../report';\n\nexport default function observerLoad() {\n  window.addEventListener('pageshow', function (event) {\n    requestAnimationFrame(() => {\n      ['load'].forEach((type) => {\n        const reportData = {\n          type: 'performance',\n          subType: type,\n          pageUrl: window.location.href,\n          startTime: performance.now() - event.timeStamp\n        }\n        // 发送数据\n        lazyReportBatch(reportData);\n      });\n\n    });\n  }, true);\n}","import { lazyReportBatch } from '../report';\n\nexport default function observerPaint() {\n  const entryHandler = (list) => {\n    for(const entry of list.getEntries()) {\n      if (entry.name === 'first-paint') {\n        observer.disconnect()\n        const json = entry.toJSON()\n        console.log(json);\n        const reportData = {\n          ...json,\n          type: 'performance',\n          subType: entry.name,\n          pageUrl: window.location.href\n        }\n        // 发送数据 todo\n        lazyReportBatch(reportData);\n      }\n    }\n  }\n  \n  const observer = new PerformanceObserver(entryHandler)\n  observer.observe({type: 'paint', buffered: true})\n}\n","// 重写XMLHttpRequest\n// 重写XMLHttpRequest.open方法\n// 重写XMLHttpRequest.send方法\nexport const originalProto = XMLHttpRequest.prototype;\nexport const originalSend = originalProto.send;\nexport const originalOpen = originalProto.open;\nimport { lazyReportBatch } from '../report';\n\nfunction overwriteOpenAndSend() {\n  originalProto.open = function newOpen(...args) {\n    this.url = args[1];\n    this.method = args[0];\n    originalOpen.apply(this, args);\n\n  }\n  originalProto.send = function newSend(...args) {\n    this.startTime = Date.now();\n    const onLoaded = () => {\n      this.endTime = Date.now();\n      this.duration = this.endTime - this.startTime;\n      const { url, method, startTime, endTime, duration, status } = this;\n      const reportData = {\n        status,\n        duration,\n        startTime,\n        endTime,\n        url,\n        method: method.toUpperCase(),\n        type: 'performance',\n        success: status >= 200 && status < 300,\n        subType: 'xhr'\n      }\n      // todo 发送数据\n      lazyReportBatch(reportData);\n      \n      this.removeEventListener('loadend', onLoaded, true);\n    }\n    this.addEventListener('loadend', onLoaded, true);\n    originalSend.apply(this, args);\n\n  }\n\n}\nexport default function xhr() {\n  overwriteOpenAndSend();\n}","import fetch from \"./fetch\";\nimport observerEntries from \"./observerEntries\";\nimport observerLCP from \"./observerLCP\";\nimport observerFCP from \"./observerFCP\";\nimport observerLoad from \"./observerLoad\";\nimport observerPaint from \"./observerPaint\";\nimport xhr from \"./xhr\";   \n\nexport default function performance() {\n    fetch();\n    observerEntries();\n    observerLCP();\n    observerFCP();\n    observerLoad();\n    observerPaint();\n    xhr();\n}","import { lazyReportBatch } from '../report';\nexport default function error() {\n  // 捕获资源加载失败的错误： js css img\n  window.addEventListener(\n    'error',\n    function (e) {\n      const target = e.target;\n      // 如果没有target 则是js错误 直接返回\n      if (!target) return;\n      // 处理静态资源错误\n      if (target.src || target.href) {\n        const url = target.src || target.href;\n        const reportData = {\n          type: 'error',\n          subType: 'resource',\n          url,\n          html: target.outerHTML,\n          pageUrl: window.location.href,\n          pahts: e.path, // 具体的资源路径\n        };\n        // todo 发送错误信息\n        lazyReportBatch(reportData);\n      }\n    },\n    true\n  );\n  // 捕获js错误\n  window.onerror = function (msg, url, lineNo, columnNo, error) {\n    const reportData = {\n      type: 'error',\n      subType: 'js',\n      msg, // 表示错误信息的文本描述\n      url, // 表示发生错误的脚本的URL\n      lineNo, // 表示发生错误的行号\n      columnNo, // 表示发生错误的列号\n      stack: error.stack, // 表示错误的堆栈信息\n      pageUrl: window.location.href,\n      startTime: performance.now(), // 表示错误发生的时间戳\n    };\n    // todo 发送错误信息\n    lazyReportBatch(reportData);\n  };\n  // 捕获promise错误  asyn await\n  window.addEventListener(\n    'unhandledrejection',\n    function (e) {\n      const reportData = {\n        type: 'error',\n        subType: 'promise',\n        reason: e.reason?.stack,\n        pageUrl: window.location.href,\n        startTime: e.timeStamp,\n      };\n      // todo 发送错误信息\n      lazyReportBatch(reportData);\n    },\n    true\n  );\n}","import { lazyReportBatch } from '../report';\nexport default function click() {\n  ['mousedown', 'touchstart'].forEach(eventType => {\n    window.addEventListener(eventType, e => {\n      const target = e.target;\n      if (target.tagName) {\n        const reportData = {\n          // scrollTop: document.documentElement.scrollTop,\n          type: 'behavior',\n          subType: 'click',\n          target: target.tagName,\n          startTime: e.timeStamp,\n          innerHtml: target.innerHTML,\n          outerHtml: target.outerHTML,\n          with: target.offsetWidth,\n          height: target.offsetHeight,\n          eventType,\n          path: e.path,\n        }\n        lazyReportBatch(reportData);\n      }\n    });\n  });\n}","import { lazyReportBatch } from '../report';\nimport { generateUniqueId } from '../utils';\nexport default function pageChange() {\n  // hash histroy\n  let oldUrl = '';\n  window.addEventListener(\n    'hashchange',\n    function (event) {\n      console.error('hashchange', event);\n      const newUrl = event.newURL;\n      const reportData = {\n        form: oldUrl,\n        to: newUrl,\n        type: 'behavior',\n        subType: 'hashchange',\n        startTime: performance.now(),\n        uuid: generateUniqueId(),\n      };\n      lazyReportBatch(reportData);\n      oldUrl = newUrl;\n    },\n    true\n  );\n\n  let from = '';\n  window.addEventListener(\n    'popstate',\n    function (event) {\n      console.error('popstate', event);\n      const to = window.location.href;\n      const reportData = {\n        form: from,\n        to: to,\n        type: 'behavior',\n        subType: 'popstate',\n        startTime: performance.now(),\n        uuid: generateUniqueId(),\n      };\n      lazyReportBatch(reportData);\n      from = to;\n    },\n    true\n  );\n\n}","import { lazyReportBatch } from '../report';\nimport {generateUniqueId} from '../utils';\n\nexport default function pv() {\n  const reportData = {\n      type: 'behavior',\n      subType: 'pv',\n      startTime: performance.now(),\n      pageUrl: window.location.href,\n      referror: document.referrer,\n      uuid: generateUniqueId(),\n  }\n  lazyReportBatch(reportData)\n}","import onClick from './onClick';\nimport pageChange from './pageChange';\nimport pv from './pv';\n\nexport default function behavior() {\n    onClick(),\n    pageChange(),\n    pv()\n}\n","import performance from './preformance/index';\nimport error from './error/index';\nimport behavior from './behavior/index';\nimport { setConfig } from './config';\nimport { lazyReportBatch } from './report';\nwindow.__webSeeSDK__ = {\n  version: '0.0.1',\n};\n\n// 针对Vue项目的错误捕获\nexport function install(Vue, options) {\n  if (__webSeeSDK__.vue) return;\n  __webSeeSDK__.vue = true;\n  setConfig(options);\n  const handler = Vue.config.errorHandler;\n  // vue项目中 通过 Vue.config.errorHandler 捕获错误\n  Vue.config.errorHandler = function (err, vm, info) {\n    // todo: 上报具体的错误信息\n    const reportData = {\n      info,\n      error: err.stack,\n      subType: 'vue',\n      type: 'error',\n      startTime: window.performance.now(),\n      pageURL: window.location.href,\n    };\n    lazyReportBatch(reportData);\n    if (handler) {\n      handler.call(this, err, vm, info);\n    }\n  };\n}\n// 针对React项目的错误捕获\nexport function errorBoundary(err, info) {\n  if (__webSeeSDK__.react) return;\n  __webSeeSDK__.react = true;\n  // todo: 上报具体的错误信息\n  const reportData = {\n    error: err?.stack,\n    info,\n    subType: 'react',\n    type: 'error',\n    startTime: window.performance.now(),\n    pageURL: window.location.href,\n  };\n  lazyReportBatch(reportData);\n}\nexport function init(options) {\n  setConfig(options);\n  performance();\n  error();\n  behavior();\n}\n\nexport default {\n  install,\n  errorBoundary,\n  performance,\n  error,\n  behavior,\n  init,\n}"],"names":["config","url","projectName","appId","userId","isImageUpload","batchSize","setConfig","options","key","deepCopy","object","map","arguments","length","undefined","WeakMap","_typeof","get","newObject","Array","isArray","set","hasOwnProperty","generateUniqueId","Date","now","Math","random","toString","substring","cache","getCache","addCache","data","push","clearCache","originalOpen","XMLHttpRequest","prototype","open","originalSend","send","report","console","error","reportData","JSON","stringify","id","imgRequest","window","navigator","sendBeacon","beaconRequest","xhrRequest","lazyReportBatch","dataCache","log","img","Image","src","concat","encodeURIComponent","requestIdleCallback","xhr","call","timeout","setTimeout","originalFetch","fetch","overwriteFetch","newFetch","startTime","type","subType","method","then","res","endTime","duration","clone","status","success","ok","catch","err","observerEntries","document","readyState","observerEvent","onLoad","removeEventListener","addEventListener","entryHandler","list","getEntries","_iterator","_createForOfIteratorHelper","_step","s","n","done","entry","value","observer","disconnect","name","entryType","sourceType","initiatorType","dns","domainLookupEnd","domainLookupStart","tcp","connectEnd","connectStart","redirect","redirectEnd","redirectStart","ttfb","responseStart","protocol","nextHopProtocol","responseBodySize","encodedBodySize","responseHeaderSize","transferSize","resourceSize","decodedBodySize","performance","e","f","PerformanceObserver","observe","buffered","observerLCP","json","toJSON","_objectSpread","pageUrl","location","href","observerFCP","observerLoad","event","requestAnimationFrame","forEach","timeStamp","observerPaint","originalProto","overwriteOpenAndSend","newOpen","_len","args","_key","apply","newSend","_this","onLoaded","toUpperCase","_len2","_key2","target","html","outerHTML","pahts","path","onerror","msg","lineNo","columnNo","stack","_e$reason","reason","click","eventType","tagName","innerHtml","innerHTML","outerHtml","with","offsetWidth","height","offsetHeight","pageChange","oldUrl","newUrl","newURL","form","to","uuid","from","pv","referror","referrer","behavior","onClick","__webSeeSDK__","version","install","Vue","vue","handler","errorHandler","vm","info","pageURL","errorBoundary","react","init"],"mappings":"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"}