{"version":3,"file":"monitor.js","sources":["../src/config.js","../src/utils.js","../src/cache.js","../src/report.js","../src/preformance/fetch.js","../src/preformance/observerEntries.js","../src/preformance/observerLCP.js","../src/preformance/observerFCP.js","../src/preformance/observerLoad.js","../src/preformance/observerPaint.js","../src/preformance/xhr.js","../src/preformance/index.js","../src/error/index.js","../src/behavior/onClick.js","../src/behavior/pageChange.js","../src/behavior/pv.js","../src/behavior/index.js","../src/webSeeSDK.js"],"sourcesContent":["// config 默认值\nconst config = {\n  url: 'http://127.0.0.1:9800/reportData',\n  projectName: 'eyesdk',\n  appId: '123456',\n  userId: '123456',\n  isImageUpload: false,\n  batchSize: 5,\n};\n// 暴露一个方法，用来修改默认值\nexport function setConfig(options) {\n  for (const key in config) {\n      if (options[key]) {\n          config[key] = options[key];\n      }\n  }\n}\nexport default config;","export function deepCopy(object, map =new WeakMap()) {\n  // 如果是基本数据类型 直接返回\n  if (!object || typeof object !== 'object') return object\n  // 考虑循环引用\n  if (map.get(object)) return map.get(object)\n\n  let newObject = Array.isArray(object) ? [] : {}\n\n  map.set(object, newObject)\n\n  for (let key in object) {\n    if (object.hasOwnProperty(key)) {\n      newObject[key] =\n        typeof object[key] === 'object' ? deepCopy(object[key]) : object[key]\n    }\n  }\n\n  return newObject\n}\n\nexport function generateUniqueId() {\n  return 'id-' + Date.now() + '-' + Math.random().toString(36).substring(2, 9)\n}","import { deepCopy } from './utils.js';\n\n\nconst cache = [];\nexport function getCache() {\n  return deepCopy(cache);\n}\nexport function addCache(data) {\n  cache.push(data);\n}\nexport function clearCache() {\n  cache.length = 0;\n}","import config from './config';\nimport { generateUniqueId } from './utils';\nimport { addCache, getCache, clearCache } from './cache';\nexport const originalProto = XMLHttpRequest.prototype;\nexport const originalOpen = XMLHttpRequest.prototype.open;\nexport const originalSend = XMLHttpRequest.prototype.send;\nexport function isSupportSendBeacon() {\n  return 'sendBeacon' in navigator;\n}\nexport function report(data) {\n  if (!config.url) {\n    console.error('请设置上传 url 地址');\n  }\n  const reportData = JSON.stringify({\n    id: generateUniqueId(),\n    data,\n  });\n  // 上报数据，使用图片的方式\n  if (config.isImageUpload) {\n    imgRequest(reportData);\n  } else {\n    // 优先使用 sendBeacon\n    if (window.navigator.sendBeacon) {\n      return beaconRequest(reportData);\n    } else {\n      xhrRequest(reportData);\n    }\n  }\n}\n// 批量上报数据\nexport function lazyReportBatch(data) {\n  addCache(data);\n  const dataCache = getCache();\n  console.log('dataCache', dataCache);\n  if (dataCache.length && dataCache.length > config.batchSize) {\n    report(dataCache);\n    clearCache();\n  }\n  //\n}\n// 图片发送数据\nexport function imgRequest(data) {\n  const img = new Image();\n  // http://127.0.0.1:8080/api?data=encodeURIComponent(data)\n  img.src = `${config.url}?data=${encodeURIComponent(JSON.stringify(data))}`;\n}\n// 普通ajax发送请求数据\nexport function xhrRequest(data) {\n  if (window.requestIdleCallback) {\n    window.requestIdleCallback(\n      () => {\n        const xhr = new XMLHttpRequest();\n        originalOpen.call(xhr, 'post', config.url);\n        originalSend.call(xhr, JSON.stringify(data));\n      },\n      { timeout: 3000 }\n    );\n  } else {\n    setTimeout(() => {\n      const xhr = new XMLHttpRequest();\n      originalOpen.call(xhr, 'post', url);\n      originalSend.call(xhr, JSON.stringify(data));\n    });\n  }\n}\n\n// const sendBeacon = isSupportSendBeacon() ? navigator.sendBeacon : xhrRequest\nexport function beaconRequest(data) {\n  if (window.requestIdleCallback) {\n    window.requestIdleCallback(\n      () => {\n        window.navigator.sendBeacon(config.url, data);\n      },\n      { timeout: 3000 }\n    );\n  } else {\n    setTimeout(() => {\n      window.navigator.sendBeacon(config.url, data);\n    });\n  }\n}","import { lazyReportBatch } from '../report';\nconst originalFetch = window.fetch;\nfunction overwriteFetch() {\n    window.fetch = function  newFetch(url, config) {\n        const startTime = Date.now();\n        const reportData = {\n            type: 'performance',\n            subType: 'fetch',\n            url,\n            startTime,\n            method: config.method,\n        }\n        return originalFetch(url, config).then((res) => {\n            const endTime = Date.now();\n            reportData.endTime = endTime;\n            reportData.duration = endTime - startTime;\n            const data = res.clone();\n            reportData.status = data.status;\n            reportData.success = data.ok;\n            // todo 上报数据\n            lazyReportBatch(reportData);\n            return res;\n        }).catch((err) => {\n            const endTime = Date.now();\n            reportData.endTime = endTime;\n            reportData.duration = endTime - startTime;\n            reportData.status = 0;\n            reportData.success = false;\n            // todo 上报数据\n            lazyReportBatch(reportData);\n        });\n    }\n}\nexport default function fetch() {\n    overwriteFetch();\n}","import { lazyReportBatch } from '../report';\n\n// 前端静态资源收集\nexport default function observerEntries() {\n  if (document.readyState === 'complete') {\n    observerEvent();\n  } else {\n    const onLoad = () => {\n      observerEvent();\n      window.removeEventListener('load', onLoad, true);\n    };\n    window.addEventListener('load', onLoad, true);\n  }\n}\n\nexport function observerEvent() {\n  const entryHandler = (list) => {\n    const data = list.getEntries();\n    for (let entry of data) {\n      if (observer) {\n        observer.disconnect();\n      }\n      console.log('entry', entry);\n      const reportData = {\n        name: entry.name, // 资源的名字\n        type: 'performance', // 类型\n        subType: entry.entryType, //类型\n        sourceType: entry.initiatorType, // 资源类型\n        duration: entry.duration, // 加载时间\n        dns: entry.domainLookupEnd - entry.domainLookupStart, // dns解析时间\n        tcp: entry.connectEnd - entry.connectStart, // tcp连接时间\n        redirect: entry.redirectEnd - entry.redirectStart, // 重定向时间\n        ttfb: entry.responseStart, // 首字节时间\n        protocol: entry.nextHopProtocol, // 请求协议\n        responseBodySize: entry.encodedBodySize, // 响应内容大小\n        responseHeaderSize: entry.transferSize - entry.encodedBodySize, // 响应头部大小\n        transferSize: entry.transferSize, //真实的请求内容大小\n        resourceSize: entry.decodedBodySize, // 资源解压后的大小\n        startTime: performance.now(),\n      };\n\n      lazyReportBatch(reportData);\n    }\n  }\n\n  let observer = new PerformanceObserver(entryHandler)\n  observer.observe({ type: ['resource'], buffered: true })\n}","import { lazyReportBatch } from '../report';\n\nexport default function observerLCP() {\n  const entryHandler = (list) => {\n    if (observer) {\n      observer.disconnect()\n    }\n    for (const entry of list.getEntries()) {\n      const json = entry.toJSON()\n      console.log(json);\n      const reportData = {\n        ...json,\n        type: 'performance',\n        subType: entry.name,\n        pageUrl: window.location.href\n      }\n      // 发送数据 todo\n      lazyReportBatch(reportData);\n    }\n  \n  }\n  \n  const observer = new PerformanceObserver(entryHandler)\n  observer.observe({ type: 'largest-contentful-paint', buffered: true })\n}","import { lazyReportBatch } from '../report';\n\nexport default function observerFCP() {\n  const entryHandler = (list) => {\n    for(const entry of list.getEntries()) {\n      if (entry.name === 'first-contentful-paint') {\n        observer.disconnect()\n        const json = entry.toJSON()\n        console.log(json);\n        const reportData = {\n          ...json,\n          type: 'performance',\n          subType: entry.name,\n          pageUrl: window.location.href\n        }\n        // 发送数据 todo\n        lazyReportBatch(reportData);\n      }\n    }\n  }\n  \n  const observer = new PerformanceObserver(entryHandler)\n  observer.observe({type: 'paint', buffered: true})\n}\n","import { lazyReportBatch } from '../report';\n\nexport default function observerLoad() {\n  window.addEventListener('pageshow', function (event) {\n    requestAnimationFrame(() => {\n      ['load'].forEach((type) => {\n        const reportData = {\n          type: 'performance',\n          subType: type,\n          pageUrl: window.location.href,\n          startTime: performance.now() - event.timeStamp\n        }\n        // 发送数据\n        lazyReportBatch(reportData);\n      });\n\n    });\n  }, true);\n}","import { lazyReportBatch } from '../report';\n\nexport default function observerPaint() {\n  const entryHandler = (list) => {\n    for(const entry of list.getEntries()) {\n      if (entry.name === 'first-paint') {\n        observer.disconnect()\n        const json = entry.toJSON()\n        console.log(json);\n        const reportData = {\n          ...json,\n          type: 'performance',\n          subType: entry.name,\n          pageUrl: window.location.href\n        }\n        // 发送数据 todo\n        lazyReportBatch(reportData);\n      }\n    }\n  }\n  \n  const observer = new PerformanceObserver(entryHandler)\n  observer.observe({type: 'paint', buffered: true})\n}\n","// 重写XMLHttpRequest\n// 重写XMLHttpRequest.open方法\n// 重写XMLHttpRequest.send方法\nexport const originalProto = XMLHttpRequest.prototype;\nexport const originalSend = originalProto.send;\nexport const originalOpen = originalProto.open;\nimport { lazyReportBatch } from '../report';\n\nfunction overwriteOpenAndSend() {\n  originalProto.open = function newOpen(...args) {\n    this.url = args[1];\n    this.method = args[0];\n    originalOpen.apply(this, args);\n\n  }\n  originalProto.send = function newSend(...args) {\n    this.startTime = Date.now();\n    const onLoaded = () => {\n      this.endTime = Date.now();\n      this.duration = this.endTime - this.startTime;\n      const { url, method, startTime, endTime, duration, status } = this;\n      const reportData = {\n        status,\n        duration,\n        startTime,\n        endTime,\n        url,\n        method: method.toUpperCase(),\n        type: 'performance',\n        success: status >= 200 && status < 300,\n        subType: 'xhr'\n      }\n      // todo 发送数据\n      lazyReportBatch(reportData);\n      \n      this.removeEventListener('loadend', onLoaded, true);\n    }\n    this.addEventListener('loadend', onLoaded, true);\n    originalSend.apply(this, args);\n\n  }\n\n}\nexport default function xhr() {\n  overwriteOpenAndSend();\n}","import fetch from \"./fetch\";\nimport observerEntries from \"./observerEntries\";\nimport observerLCP from \"./observerLCP\";\nimport observerFCP from \"./observerFCP\";\nimport observerLoad from \"./observerLoad\";\nimport observerPaint from \"./observerPaint\";\nimport xhr from \"./xhr\";   \n\nexport default function performance() {\n    fetch();\n    observerEntries();\n    observerLCP();\n    observerFCP();\n    observerLoad();\n    observerPaint();\n    xhr();\n}","import { lazyReportBatch } from '../report';\nexport default function error() {\n  // 捕获资源加载失败的错误： js css img\n  window.addEventListener(\n    'error',\n    function (e) {\n      const target = e.target;\n      // 如果没有target 则是js错误 直接返回\n      if (!target) return;\n      // 处理静态资源错误\n      if (target.src || target.href) {\n        const url = target.src || target.href;\n        const reportData = {\n          type: 'error',\n          subType: 'resource',\n          url,\n          html: target.outerHTML,\n          pageUrl: window.location.href,\n          pahts: e.path, // 具体的资源路径\n        };\n        // todo 发送错误信息\n        lazyReportBatch(reportData);\n      }\n    },\n    true\n  );\n  // 捕获js错误\n  window.onerror = function (msg, url, lineNo, columnNo, error) {\n    const reportData = {\n      type: 'error',\n      subType: 'js',\n      msg, // 表示错误信息的文本描述\n      url, // 表示发生错误的脚本的URL\n      lineNo, // 表示发生错误的行号\n      columnNo, // 表示发生错误的列号\n      stack: error.stack, // 表示错误的堆栈信息\n      pageUrl: window.location.href,\n      startTime: performance.now(), // 表示错误发生的时间戳\n    };\n    // todo 发送错误信息\n    lazyReportBatch(reportData);\n  };\n  // 捕获promise错误  asyn await\n  window.addEventListener(\n    'unhandledrejection',\n    function (e) {\n      const reportData = {\n        type: 'error',\n        subType: 'promise',\n        reason: e.reason?.stack,\n        pageUrl: window.location.href,\n        startTime: e.timeStamp,\n      };\n      // todo 发送错误信息\n      lazyReportBatch(reportData);\n    },\n    true\n  );\n}","import { lazyReportBatch } from '../report';\nexport default function click() {\n  ['mousedown', 'touchstart'].forEach(eventType => {\n    window.addEventListener(eventType, e => {\n      const target = e.target;\n      if (target.tagName) {\n        const reportData = {\n          // scrollTop: document.documentElement.scrollTop,\n          type: 'behavior',\n          subType: 'click',\n          target: target.tagName,\n          startTime: e.timeStamp,\n          innerHtml: target.innerHTML,\n          outerHtml: target.outerHTML,\n          with: target.offsetWidth,\n          height: target.offsetHeight,\n          eventType,\n          path: e.path,\n        }\n        lazyReportBatch(reportData);\n      }\n    });\n  });\n}","import { lazyReportBatch } from '../report';\nimport { generateUniqueId } from '../utils';\nexport default function pageChange() {\n  // hash histroy\n  let oldUrl = '';\n  window.addEventListener(\n    'hashchange',\n    function (event) {\n      console.error('hashchange', event);\n      const newUrl = event.newURL;\n      const reportData = {\n        form: oldUrl,\n        to: newUrl,\n        type: 'behavior',\n        subType: 'hashchange',\n        startTime: performance.now(),\n        uuid: generateUniqueId(),\n      };\n      lazyReportBatch(reportData);\n      oldUrl = newUrl;\n    },\n    true\n  );\n\n  let from = '';\n  window.addEventListener(\n    'popstate',\n    function (event) {\n      console.error('popstate', event);\n      const to = window.location.href;\n      const reportData = {\n        form: from,\n        to: to,\n        type: 'behavior',\n        subType: 'popstate',\n        startTime: performance.now(),\n        uuid: generateUniqueId(),\n      };\n      lazyReportBatch(reportData);\n      from = to;\n    },\n    true\n  );\n\n}","import { lazyReportBatch } from '../report';\nimport {generateUniqueId} from '../utils';\n\nexport default function pv() {\n  const reportData = {\n      type: 'behavior',\n      subType: 'pv',\n      startTime: performance.now(),\n      pageUrl: window.location.href,\n      referror: document.referrer,\n      uuid: generateUniqueId(),\n  }\n  lazyReportBatch(reportData)\n}","import onClick from './onClick';\nimport pageChange from './pageChange';\nimport pv from './pv';\n\nexport default function behavior() {\n    onClick(),\n    pageChange(),\n    pv()\n}\n","import performance from './preformance/index';\nimport error from './error/index';\nimport behavior from './behavior/index';\nimport { setConfig } from './config';\nimport { lazyReportBatch } from './report';\nwindow.__webSeeSDK__ = {\n  version: '0.0.1',\n};\n\n// 针对Vue项目的错误捕获\nexport function install(Vue, options) {\n  if (__webSeeSDK__.vue) return;\n  __webSeeSDK__.vue = true;\n  setConfig(options);\n  const handler = Vue.config.errorHandler;\n  // vue项目中 通过 Vue.config.errorHandler 捕获错误\n  Vue.config.errorHandler = function (err, vm, info) {\n    // todo: 上报具体的错误信息\n    const reportData = {\n      info,\n      error: err.stack,\n      subType: 'vue',\n      type: 'error',\n      startTime: window.performance.now(),\n      pageURL: window.location.href,\n    };\n    lazyReportBatch(reportData);\n    if (handler) {\n      handler.call(this, err, vm, info);\n    }\n  };\n}\n// 针对React项目的错误捕获\nexport function errorBoundary(err, info) {\n  if (__webSeeSDK__.react) return;\n  __webSeeSDK__.react = true;\n  // todo: 上报具体的错误信息\n  const reportData = {\n    error: err?.stack,\n    info,\n    subType: 'react',\n    type: 'error',\n    startTime: window.performance.now(),\n    pageURL: window.location.href,\n  };\n  lazyReportBatch(reportData);\n}\nexport function init(options) {\n  setConfig(options);\n  performance();\n  error();\n  behavior();\n}\n\nexport default {\n  install,\n  errorBoundary,\n  performance,\n  error,\n  behavior,\n  init,\n}"],"names":["config","url","projectName","appId","userId","isImageUpload","batchSize","setConfig","options","key","deepCopy","object","map","arguments","length","undefined","WeakMap","_typeof","get","newObject","Array","isArray","set","hasOwnProperty","generateUniqueId","Date","now","Math","random","toString","substring","cache","getCache","addCache","data","push","clearCache","originalOpen","XMLHttpRequest","prototype","open","originalSend","send","report","console","error","reportData","JSON","stringify","id","imgRequest","window","navigator","sendBeacon","beaconRequest","xhrRequest","lazyReportBatch","dataCache","log","img","Image","src","concat","encodeURIComponent","requestIdleCallback","xhr","call","timeout","setTimeout","originalFetch","fetch","overwriteFetch","newFetch","startTime","type","subType","method","then","res","endTime","duration","clone","status","success","ok","catch","err","observerEntries","document","readyState","observerEvent","onLoad","removeEventListener","addEventListener","entryHandler","list","getEntries","_iterator","_createForOfIteratorHelper","_step","s","n","done","entry","value","observer","disconnect","name","entryType","sourceType","initiatorType","dns","domainLookupEnd","domainLookupStart","tcp","connectEnd","connectStart","redirect","redirectEnd","redirectStart","ttfb","responseStart","protocol","nextHopProtocol","responseBodySize","encodedBodySize","responseHeaderSize","transferSize","resourceSize","decodedBodySize","performance","e","f","PerformanceObserver","observe","buffered","observerLCP","json","toJSON","_objectSpread","pageUrl","location","href","observerFCP","observerLoad","event","requestAnimationFrame","forEach","timeStamp","observerPaint","originalProto","overwriteOpenAndSend","newOpen","_len","args","_key","apply","newSend","_this","onLoaded","toUpperCase","_len2","_key2","target","html","outerHTML","pahts","path","onerror","msg","lineNo","columnNo","stack","_e$reason","reason","click","eventType","tagName","innerHtml","innerHTML","outerHtml","with","offsetWidth","height","offsetHeight","pageChange","oldUrl","newUrl","newURL","form","to","uuid","from","pv","referror","referrer","behavior","onClick","__webSeeSDK__","version","install","Vue","vue","handler","errorHandler","vm","info","pageURL","errorBoundary","react","init"],"mappings":"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"}